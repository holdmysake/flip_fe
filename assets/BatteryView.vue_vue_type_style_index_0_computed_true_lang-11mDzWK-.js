import{h as _}from"./moment-C5S46NFB.js";import{u as v}from"./http-BFgc5KR4.js";import{d as f,g as l,h,j as b,c as n,e as o,u as g,f as w,t as B,a as k,l as S,r as T,o as r}from"./index-CvvKvLPo.js";const M="/assets/batt-OzIihCY1.png",Y={class:"battery-container"},x={key:0,class:"batimg"},D=["src"],I={class:"bt-parent"},N={class:"bt-perc"},V={key:1,class:"batt-failed"},P=f({__name:"BatteryView",props:{idSpot:{type:[Number],required:!0}},setup(d){const p=d,t=l({}),c=l(!1);h(async()=>{await i().then(e=>{t.value=e,u()})});const u=()=>{if(t.value!=null&&t.value.timestamp!=null){const e=_().format("YYYY-MM-DDTHH:MM:SS").split("T")[0],a=t.value.timestamp.split("T")[0];e==a&&(c.value=!0)}},m=setInterval(async()=>{await i().then(e=>{t.value=e})},6e4);b(()=>{clearInterval(m)});const i=async()=>new Promise(async(e,a)=>{try{const s={idspot:p.idSpot},y=await v().httpPost("api/Battery/getbatterylevel",s);e(y.data)}catch(s){a(s)}});return(e,a)=>{const s=T("font-awesome-icon");return r(),n("div",Y,[t.value&&c.value?(r(),n("div",x,[o("img",{src:g(M),alt:"battery"},null,8,D),o("div",I,[o("span",{style:w({width:`${t.value.batt}%`}),class:"bt-child"},null,4),o("div",N,B(t.value.batt)+"%",1)])])):(r(),n("span",V,[o("b",null,[k(s,{icon:"exclamation-triangle"}),a[0]||(a[0]=S(" Battery reading failed"))])]))])}}});export{P as _};
