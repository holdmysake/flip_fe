import{d as q,g as i,i as k,c as y,a as o,e as l,k as C,n as b,u as h,r as S,p as N,H as P,w as B,F,l as $,o as V}from"./index-gADT0Y1l.js";import{u as A}from"./index-CLUB-lar.js";import{_ as I}from"./InputView.vue_vue_type_style_index_0_lang-SMHZyz9o.js";import{a as U,_ as O,B as j}from"./ThemeSetting.vue_vue_type_style_index_0_lang-WROhTEbk.js";import{_ as z}from"./ButtonView.vue_vue_type_style_index_0_computed_true_lang-Bg9X1S6w.js";import{p as L}from"./api-COxAlsYx.js";import"./http-c2aLmsiR.js";import"./moment-C5S46NFB.js";const W=()=>({vFullname:e=>{const a=/\d/,t=/[^a-zA-Z\s]/;return e.value.length===0?{status:!1,message:"This field is required"}:a.test(e.value)?{status:!1,message:"Invalid. Contains number"}:t.test(e.value)?{status:!1,message:"Invalid. Contains foreign character(s)"}:e.value<3?{status:!1,message:"Invalid. Too short"}:{status:!0,message:""}},vIsEmpty:e=>e.value.length===0?{status:!1,message:"This field is required"}:{status:!0,message:""},vPhone:e=>{const a=/^\+?([ -]?\d+)+|\(\d+\)([ -]\d+)$/;return e.value.length===0?{status:!1,message:"This field is required"}:a.test(e.value)?{status:!0,message:""}:{status:!1,message:"Invalid. Unacceptable format"}},vPassword:e=>e.value.length===0?{status:!1,message:"This field is required"}:e.value.length<6?{status:!1,message:"Too short. Supply at least 8 chars"}:{status:!0,message:""},vEmail:e=>{const a=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,t=/[^a-zA-Z0-9.@_-]/;return e.value.length===0?{status:!1,message:"This field is required"}:a.test(e.value)?t.test(e.value)?{status:!1,message:"Invalid. Contains foreign character(s)"}:{status:!0,message:""}:{status:!1,message:"Unacceptable E-mail format"}},checkValidation:e=>{const a=e.some(t=>t.value!=="");return console.log(a),a},vIsEqual:(e,a,t)=>e.value.length===0?{status:!1,message:"This field is required"}:e.value===a.value?{status:!0,message:""}:{status:!1,message:t},vIsNotEqual:(e,a,t)=>e.value.length===0?{status:!1,message:"This field is required"}:e.value!==a.value?{status:!0,message:""}:{status:!1,message:t}}),Z=async f=>(await L("/panel/login",f,!1)).data,D={class:b(["bl-wrapper"])},H={class:"bl-opt"},J={style:{display:"flex","flex-flow":"row nowrap","justify-content":"flex-start","margin-bottom":"1rem"}},M={class:"form-group py-2"},G={key:0,class:"lgwait-overlay"},te=q({__name:"LoginView",setup(f){const{vPassword:c,vEmail:g,checkValidation:w}=W(),u=i(!1),m=A(),r=i(""),n=i(""),e=i(!0),a=i(""),t=i(""),E=[a,t];a.value=g(r).message,t.value=c(n).message,k([r,n],()=>{a.value=g(r).message||"",t.value=c(n).message||"",e.value=w(E)},{immediate:!0});const v=i(!1),x=async()=>{if(v.value=!0,!e.value){const _={email:r.value,password:n.value};try{const s=await Z(_);m.notifyAlertSuccess("Berhasil","Login berhasil","Oke",()=>{localStorage.setItem("authToken",s.token);try{localStorage.setItem("user",JSON.stringify(s.user))}catch(p){console.error("Failed stringify:",p,s.user),localStorage.setItem("user",String(s.user))}window.location.href="/Dashboard"}),v.value=!1}catch(s){s.response&&(console.log(s.response),m.notifyAlertError("Failed",s.response.data.message,"Ok",()=>{}),v.value=!1)}}},T=()=>{u.value=!u.value};return(_,s)=>{const p=S("font-awesome-icon");return V(),y(F,null,[o(U,{visible:u.value,"onUpdate:visible":s[0]||(s[0]=d=>u.value=d)},null,8,["visible"]),l("div",D,[l("div",{class:b(["bl-inner",h(m).mTheme])},[l("div",H,[o(O),l("a",{class:b([h(m).textTheme]),onClick:T,href:"javascript:void(0)"},[o(p,{icon:"gear"})],2)]),l("div",J,[o(j,{style:{"padding-left":"1rem"},"site-name":h(N).appName},null,8,["site-name"])]),l("form",{onSubmit:P(x,["prevent"])},[o(I,{"in-label":"Email","in-placeholder":"example@email.com","in-type":"text","in-required":!0,"in-helper":a.value,modelValue:r.value,"onUpdate:modelValue":s[1]||(s[1]=d=>r.value=d)},null,8,["in-helper","modelValue"]),o(I,{"in-label":"Password","in-placeholder":"","in-type":"password","in-required":!0,"in-helper":t.value,modelValue:n.value,"onUpdate:modelValue":s[2]||(s[2]=d=>n.value=d)},null,8,["in-helper","modelValue"]),l("div",M,[o(z,{"bt-type":"submit","bt-disabled":e.value},{default:B(()=>s[3]||(s[3]=[$("Sign-in")])),_:1},8,["bt-disabled"])])],32)],2)]),v.value?(V(),y("div",G,s[4]||(s[4]=[l("div",{class:"lgwait-inner"},[l("img",{style:{width:"200px",height:"200px","object-fit":"cover"},src:"https://cdn.dribbble.com/users/1186261/screenshots/3718681/media/1df2396f1eaa146bcb7dd3e73c1dc77b.gif"}),l("p",null,"Please wait")],-1)]))):C("",!0)],64)}}});export{te as default};
