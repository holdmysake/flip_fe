import{d as q,g as i,i as k,c as _,a as o,e as l,k as C,n as h,u as p,r as N,p as S,H as P,w as B,F as $,l as A,o as y}from"./index-C2CCN2NB.js";import{u as F}from"./index-CnL09n3A.js";import{_ as V}from"./InputView.vue_vue_type_style_index_0_lang-DwlRu3fL.js";import{a as U,_ as O,B as j}from"./ThemeSetting.vue_vue_type_style_index_0_lang-181cmWHe.js";import{_ as z}from"./ButtonView.vue_vue_type_style_index_0_computed_true_lang-CxbBZc9q.js";import{p as L}from"./api-tIjG661J.js";import"./http-DrjsCXOO.js";import"./moment-C5S46NFB.js";const W=()=>({vFullname:e=>{const s=/\d/,t=/[^a-zA-Z\s]/;return e.value.length===0?{status:!1,message:"This field is required"}:s.test(e.value)?{status:!1,message:"Invalid. Contains number"}:t.test(e.value)?{status:!1,message:"Invalid. Contains foreign character(s)"}:e.value<3?{status:!1,message:"Invalid. Too short"}:{status:!0,message:""}},vIsEmpty:e=>e.value.length===0?{status:!1,message:"This field is required"}:{status:!0,message:""},vPhone:e=>{const s=/^\+?([ -]?\d+)+|\(\d+\)([ -]\d+)$/;return e.value.length===0?{status:!1,message:"This field is required"}:s.test(e.value)?{status:!0,message:""}:{status:!1,message:"Invalid. Unacceptable format"}},vPassword:e=>e.value.length===0?{status:!1,message:"This field is required"}:e.value.length<6?{status:!1,message:"Too short. Supply at least 8 chars"}:{status:!0,message:""},vEmail:e=>{const s=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,t=/[^a-zA-Z0-9.@_-]/;return e.value.length===0?{status:!1,message:"This field is required"}:s.test(e.value)?t.test(e.value)?{status:!1,message:"Invalid. Contains foreign character(s)"}:{status:!0,message:""}:{status:!1,message:"Unacceptable E-mail format"}},checkValidation:e=>{const s=e.some(t=>t.value!=="");return console.log(s),s},vIsEqual:(e,s,t)=>e.value.length===0?{status:!1,message:"This field is required"}:e.value===s.value?{status:!0,message:""}:{status:!1,message:t},vIsNotEqual:(e,s,t)=>e.value.length===0?{status:!1,message:"This field is required"}:e.value!==s.value?{status:!0,message:""}:{status:!1,message:t}}),Z=async f=>(await L("/panel/login",f,!1)).data,D={class:h(["bl-wrapper"])},H={class:"bl-opt"},J={style:{display:"flex","flex-flow":"row nowrap","justify-content":"flex-start","margin-bottom":"1rem"}},M={class:"form-group py-2"},G={key:0,class:"lgwait-overlay"},te=q({__name:"LoginView",setup(f){const{vPassword:c,vEmail:g,checkValidation:b}=W(),u=i(!1),m=F(),r=i(""),n=i(""),e=i(!0),s=i(""),t=i(""),E=[s,t];s.value=g(r).message,t.value=c(n).message,k([r,n],()=>{s.value=g(r).message||"",t.value=c(n).message||"",e.value=b(E)},{immediate:!0});const v=i(!1),I=async()=>{if(v.value=!0,!e.value){const w={email:r.value,password:n.value};try{const a=await Z(w);m.notifyAlertSuccess("Berhasil","Login berhasil","Oke",()=>{localStorage.setItem("authToken",a.token),localStorage.setItem("user",JSON.stringify(a.user)),window.location.href="/Dashboard"}),v.value=!1}catch(a){a.response&&(console.log(a.response),m.notifyAlertError("Failed",a.response.data.message,"Ok",()=>{}),v.value=!1)}}},x=()=>{u.value=!u.value};return(w,a)=>{const T=N("font-awesome-icon");return y(),_($,null,[o(U,{visible:u.value,"onUpdate:visible":a[0]||(a[0]=d=>u.value=d)},null,8,["visible"]),l("div",D,[l("div",{class:h(["bl-inner",p(m).mTheme])},[l("div",H,[o(O),l("a",{class:h([p(m).textTheme]),onClick:x,href:"javascript:void(0)"},[o(T,{icon:"gear"})],2)]),l("div",J,[o(j,{style:{"padding-left":"1rem"},"site-name":p(S).appName},null,8,["site-name"])]),l("form",{onSubmit:P(I,["prevent"])},[o(V,{"in-label":"Email","in-placeholder":"example@email.com","in-type":"text","in-required":!0,"in-helper":s.value,modelValue:r.value,"onUpdate:modelValue":a[1]||(a[1]=d=>r.value=d)},null,8,["in-helper","modelValue"]),o(V,{"in-label":"Password","in-placeholder":"","in-type":"password","in-required":!0,"in-helper":t.value,modelValue:n.value,"onUpdate:modelValue":a[2]||(a[2]=d=>n.value=d)},null,8,["in-helper","modelValue"]),l("div",M,[o(z,{"bt-type":"submit","bt-disabled":e.value},{default:B(()=>a[3]||(a[3]=[A("Sign-in")])),_:1},8,["bt-disabled"])])],32)],2)]),v.value?(y(),_("div",G,a[4]||(a[4]=[l("div",{class:"lgwait-inner"},[l("img",{style:{width:"200px",height:"200px","object-fit":"cover"},src:"https://cdn.dribbble.com/users/1186261/screenshots/3718681/media/1df2396f1eaa146bcb7dd3e73c1dc77b.gif"}),l("p",null,"Please wait")],-1)]))):C("",!0)],64)}}});export{te as default};
